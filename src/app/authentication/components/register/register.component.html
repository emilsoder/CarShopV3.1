<div class="row">
  <div class="col-mat-6 col-mat-offset-3">
    <mat-card>
      <mat-card-header>
        <h3> Register</h3>
      </mat-card-header>
      <mat-card-content>
        <form class="example-form"
              #registerForm="ngForm"
              name="registerForm">
          <table class="example-full-width" cellspacing="0">
            <tr>
              <td style="padding-top: 10px; padding-bottom:10px">
                <mat-select placeholder="User type"
                           #reg_roleId
                           name="reg_roleId"
                           [required]="true"
                           style="width: 100%"
                           [(ngModel)]="registerModel.roleId">

                  <mat-option *ngFor="let role of roles | async"
                             [value]="role.id">
                    {{role.name}}
                  </mat-option>
                </mat-select>
                <mat-error *ngIf="!reg_roleId.value">
                  User type is <strong>required</strong>
                </mat-error>
              </td>
            </tr>
            <tr>
              <td>
                <mat-form-field class="example-full-width">
                  <input matInput
                         placeholder="First name"
                         [(ngModel)]="registerModel.firstName"
                         [required]="true"
                         #reg_firstName="ngModel"
                         name="reg_firstName">
                  <mat-error *ngIf="reg_firstName.hasError('required')">
                    First name is <strong>required</strong>
                  </mat-error>
                </mat-form-field>
              </td>
            </tr>
            <tr>
              <td>
                <mat-form-field class="example-full-width">
                  <input matInput
                         placeholder="Last name"
                         [(ngModel)]="registerModel.lastName"
                         [required]="true"
                         #reg_lastName="ngModel"
                         name="reg_lastName">
                  <mat-error *ngIf="reg_lastName.hasError('required')">
                    Last name is <strong>required</strong>
                  </mat-error>
                </mat-form-field>
              </td>
            </tr>
            <tr>
              <td>
                <mat-form-field class="example-full-width">
                  <input matInput
                         placeholder="Username"
                         [(ngModel)]="registerModel.userName"
                         [required]="true"
                         #reg_userName="ngModel"
                         name="reg_userName">
                  <mat-error *ngIf="reg_userName.hasError('required')">
                    Username is <strong>required</strong>
                  </mat-error>
                </mat-form-field>
              </td>
            </tr>
            <tr>
              <td>
                <mat-form-field class="example-full-width">
                  <input matInput
                         placeholder="Email"
                         type="email"
                         [(ngModel)]="registerModel.email"
                         [required]="true"
                         #reg_email="ngModel"
                         name="reg_email">
                  <mat-error *ngIf="reg_email.hasError('pattern')">
                    Please enter a valid email address
                  </mat-error>
                  <mat-error *ngIf="reg_email.hasError('required')">
                    Email is <strong>required</strong>
                  </mat-error>
                </mat-form-field>
              </td>
            </tr>
            <tr>
              <td>
                <mat-form-field class="example-full-width">
                  <input matInput
                         placeholder="Password"
                         [(ngModel)]="registerModel.password"
                         [required]="true"
                         type="password"
                         #reg_password="ngModel"
                         name="reg_password">
                  <mat-error *ngIf="reg_password.hasError('required')">
                    Password is <strong>required</strong>
                  </mat-error>
                </mat-form-field>
              </td>
            </tr>
            <tr>
              <td>
                <mat-form-field class="example-full-width">
                  <input matInput
                         placeholder="Password"
                         [(ngModel)]="registerModel.confirmPassword"
                         [required]="true"
                         type="password"
                         #reg_confirmPassword="ngModel"
                         name="reg_confirmPassword">
                  <mat-error *ngIf="reg_confirmPassword.hasError('required')">
                    First name is <strong>required</strong>
                  </mat-error>
                  <mat-error
                    *ngIf="(reg_confirmPassword.value && reg_password.value)
                    && (reg_confirmPassword.value !== reg_password.value)">
                    <strong>Passwords do not match</strong>
                  </mat-error>
                </mat-form-field>
              </td>
            </tr>
          </table>
          <mat-error *ngIf="isError">
            <strong>Something in the shitty backend has fucked up. Please try again later</strong>
          </mat-error>
        </form>
      </mat-card-content>
      <mat-card-actions>
        <button mat-raised-button color="primary"
                [disabled]="!registerForm.form.valid || reg_confirmPassword.value !== reg_password.value"
                (click)="register()">
          Submit
        </button>
        <button mat-raised-button style="float: right" routerLink="/login">Log in</button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
